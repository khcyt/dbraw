const kh_global=Function("return globalThis;")()||Function("return this;")()||Function("return self;")();const as_module=undefined==this;const asWorker="undefined"===typeof window&&"undefined"===typeof process&&self;const cf="kh_server";const mf="common_dirname_esm";kh_global.kh??={};kh_global.kh.context??="undefined"!==typeof window?kh_global.parent==kh_global?"window":"iframe":"undefined"!==typeof process?"node.js":"undefined"!==typeof self?self.name??"worker":"unknown";kh_global.kh.storage??={};const cs=kh_global.kh.storage[cf]??={cf,ms:new Set};const ms=kh_global.kh.storage[mf]??={mf,cs};cs.ms.add(ms);import{fileURLToPath}from"node:url";import{isDevelopement}from"/contrib/jsm/kh_earlybird.js";export function dirname(__dirname=import.meta.url){__dirname=fileURLToPath(__dirname).replaceAll("\\","/");let ret_dirname=__dirname?.substring(0,__dirname.lastIndexOf("/"));if(isDevelopement){const jsapps="jsapps/";const pos_jsapps_1=ret_dirname.indexOf(jsapps);const pos_jsapps_2=ret_dirname.lastIndexOf(jsapps);if(pos_jsapps_1!==pos_jsapps_2){const end_path=ret_dirname.substring(pos_jsapps_2+jsapps.length);ret_dirname=ret_dirname.substring(0,pos_jsapps_1+jsapps.length)+end_path}}return ret_dirname}kh_global.LoadedScripts?.get(mf).resolve(ms);