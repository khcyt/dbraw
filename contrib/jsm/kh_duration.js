const kh_global=Function("return globalThis;")()||Function("return this;")()||Function("return self;")();const as_module=undefined==this;const asWorker="undefined"===typeof kh_global.window&&"undefined"===typeof kh_global.process&&kh_global.self;const cf="kh_js";const mf="kh_duration_esm";kh_global.kh??={};kh_global.kh.context??="undefined"!==typeof kh_global.window?kh_global.parent==kh_global?"window":"iframe":"undefined"!==typeof kh_global.process?"node.js":"undefined"!==typeof kh_global.self?kh_global.self.name??"worker":"unknown";kh_global.kh.storage??={};const cs=kh_global.kh.storage[cf]??={cf,ms:new Set};const ms=kh_global.kh.storage[mf]??={mf,cs};cs.ms.add(ms);import{isValid,isNumber,loadModule}from"/contrib/jsm/kh_earlybird.js";let parse,serialize;loadModule("tinyduration").then(module=>{({parse,serialize}=module)});const print_level=undefined;import{Logger}from"/contrib/jsm/kh_log.js";const kh_log=new Logger(print_level,()=>name);const name=MF`${mf}`;export class DurationTime{#duration_;constructor({days=0,hours=0,minutes=0,seconds=0,millis=0}={}){this.#duration_={days,hours,minutes,seconds:seconds+millis/1e3}}get days(){return this.#duration_.days}get hours(){return this.#duration_.hours}get minutes(){return this.#duration_.minutes}get seconds(){return this.#duration_.seconds}toDays(){return this.toSeconds()/86400}toHours(){return this.toSeconds()/3600}toMinutes(){return this.toSeconds()/60}toSeconds(){return this.#duration_.days*86400+this.#duration_.hours*3600+this.#duration_.minutes*60+this.#duration_.seconds}toMillis(){return this.toSeconds()*1e3}toString(){return serialize(this.#duration_)}toJSON(){return this.toString()}static#parse(duration){if(!isValid(duration))return{};if(isNumber(duration,true))return{seconds:duration/1e3};return parse?.(duration)}static Days(duration){return new DurationTime(DurationTime.#parse(duration)).toDays()}static Hours(duration){return new DurationTime(DurationTime.#parse(duration)).toHours()}static Minutes(duration){return new DurationTime(DurationTime.#parse(duration)).toMinutes()}static Seconds(duration){return new DurationTime(DurationTime.#parse(duration)).toSeconds()}static Millis(duration){return new DurationTime(DurationTime.#parse(duration)).toMillis()}static fromStart(duration,start=new Date){const{years=0,months=0,weeks=0,days=0,minutes=0,seconds=0}=DurationTime.#parse(duration);start.setTime(start.getTime()+weeks*7*864e5+days*864e5+minutes*6e4+seconds*1e3);start.setMonth(start.getMonth()+months);start.setUTCFullYear(start.getUTCFullYear()+years);return start}}kh_global.LoadedScripts.get(mf).resolve(ms);