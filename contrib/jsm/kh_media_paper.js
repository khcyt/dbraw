const kh_global=Function("return globalThis;")()||Function("return this;")()||Function("return self;")();const as_module=undefined==this;const asWorker="undefined"===typeof kh_global.window&&"undefined"===typeof kh_global.process&&kh_global.self;const cf="kh_media";const mf="kh_media_paper_esm";kh_global.kh??={};kh_global.kh.context??="undefined"!==typeof kh_global.window?kh_global.parent==kh_global?"window":"iframe":"undefined"!==typeof kh_global.process?"node.js":"undefined"!==typeof kh_global.self?kh_global.self.name??"worker":"unknown";kh_global.kh.storage??={};const cs=kh_global.kh.storage[cf]??={cf,ms:new Set};const ms=kh_global.kh.storage[mf]??={mf,cs};cs.ms.add(ms);import{isValid,isString,isNumber}from"/contrib/jsm/kh_earlybird.js";import{Error}from"/contrib/jsm/kh_classes.js";const print_level=undefined;import{Logger}from"/contrib/jsm/kh_log.js";const kh_log=new Logger(print_level,()=>name);const name=MF`${mf}`;export class paper{#paper_;static#papers_=new Map([["a5",{height:210,width:148.5}],["a4",{height:297,width:210}],["a3",{height:420,width:297}],["a2",{height:594,width:420}],["a1",{height:841,width:594}],["a0",{height:1189,width:841}]].map(([k,v])=>[k,{dimension:v,orientation:"portrait",format:k}]));constructor({height,width,format,orientation="portrait",margins={top:20,right:25,bottom:20,left:25}}={}){if(1==arguments.length&&isString(arguments[0]))format=arguments[0];const known_paper=paper.#papers_.get(format);if(!isNumber(height)&&!isNumber(width)){if(isValid(known_paper)){this.#paper_={margins,...known_paper};this.setOrientation(orientation)}else throw new Error({msg:"param-invalid"})}else{const dimension={height,width};if(isValid(known_paper)){this.#paper_={margins,...known_paper,dimension};this.setOrientation(orientation)}else{paper.#papers_.set(format,this.#paper_={dimension,format,orientation,margins})}}}get format(){return this.#paper_.format}get orientation(){return this.#paper_.orientation}get height(){return+this.#paper_.dimension.height}get width(){return+this.#paper_.dimension.width}get margins(){return this.#paper_.margins}set orientation(orientation){this.#paper_.orientation=orientation}set height(height){this.#paper_.dimension.height=+height}set width(width){this.#paper_.dimension.width=+width}set margins(margins){this.#paper_.margins={...this.#paper_.margins,...margins}}effectiveSize(){return{height:this.height-this.margins.top-this.margins.bottom,width:this.width-this.margins.left-this.margins.right}}swap(){this.setOrientation("portrait"==this.orientation?"landscape":"portrait")}setOrientation(orientation="portrait"){if(this.orientation!==orientation){this.orientation=orientation;[this.width,this.height]=[this.height,this.width]}}}kh_global.LoadedScripts.get(mf).resolve(ms);